<%- include('../partials/header') %> 
  <!-- Main JS -->
  <script src="/js/app.js" defer></script>
  <script src="/js/playlistShow.js" defer></script>
<%- include('../partials/navbar')  %> 
  <div class="container text-center my-3 movies-display">
    <h2 class="font-weight-light mb-4" id="added-movie-alert">Click movies to add it to your playlist!</h2>
    <div class="row mx-auto my-auto">
      <div id="movieCarousel" class="carousel slide w-100" data-ride="carousel" data-interval="false">
        <div id="movie-rec" class="carousel-inner w-100" role="listbox">
          <!-- https://www.codeply.com/go/EIOtI7nkP8/bootstrap-carousel-with-multiple-cards -->
          <!-- DEMO 3 Item-->
          <% moviesList.forEach((movie, i) => { %>
            <% if (i === 0) { %> 
            <div class="carousel-item active">
            <% } else { %> 
            <div class="carousel-item">
          <% } %> 
              <div class="col-md-4">
                  <div class="card card-body">
                    <div class="hover hover-3 text-white rounded">
                      <img class="img-fluid" src="https://image.tmdb.org/t/p/w500<%= movie.poster_path %>" alt="<%= movie.id %>" />
                      <div class="hover-overlay"></div>
                      <div class="hover-3-content px-5 py-4">
                      <p class="hover-3-description small text-uppercase mb-0"><%= movie.overview %></p>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          <% }) %>
          </div>
        </div>
        <a class="carousel-control-prev w-auto" href="#movieCarousel" role="button" data-slide="prev">
            <span class="carousel-control-prev-icon bg-dark border border-dark rounded-circle" aria-hidden="true"></span>
            <span class="sr-only">Previous</span>
        </a>
        <a class="carousel-control-next w-auto" href="#movieCarousel" role="button" data-slide="next">
            <span class="carousel-control-next-icon bg-dark border border-dark rounded-circle" aria-hidden="true"></span>
            <span class="sr-only">Next</span>
        </a>
      </div>
      <div class="row mx-auto my-3 d-flex justify-content-center">
        <button class="btn btn-outline-secondary" id="review-playlist">
          <span class='review-button'>review playlist</span>
          <span class='review-movies'>review movies</span>
        </button>
        <a class="btn btn-outline-warning retake-btn" href="../../playlists/new">retake quiz</a>
      </div>
    </div>
    <div class="create-playlist-form">
      <div class="row">
        <div class="chosen-movies"></div>
      </div>
      <div class="row-lg-11 review-form-div">
        <form action="/playlists" method="POST" class="playlist-form">
          <div class="form-group">
            <input 
              type="text" 
              id="playlist-title" 
              name="title" 
              placeholder="your playlist name"
              required
            />
          </div>
          <div class="form-group">
            <textarea 
              id="playlist-description" 
              name="description" 
              placeholder="enter playlist description"></textarea>
          </div>
          <input type="hidden" name="movieIdString" id="movieIdString" />
          <button class="create-playlist btn btn-outline-primary rounded-pill mt-2">create playlist</button>
        </form>
      </div>
    </div>  
  </div>

<%- include('../partials/footer.ejs') %>